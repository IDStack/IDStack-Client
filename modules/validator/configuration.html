<!DOCTYPE html>
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8"/>
    <title>IDStack</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="IDStack | The decentralized protocol for document verification built on digital signatures" name="description"/>
    <meta content="www.idstack.one" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link href="../../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="../../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/jquery-multi-select/css/multi-select.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/global/plugins/bootstrap-toastr/toastr.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="../../assets/global/css/components-md.min.css" rel="stylesheet" id="style_components" type="text/css"/>
    <link href="../../assets/global/css/plugins-md.min.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="../../assets/layout/css/layout.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../assets/layout/css/themes/blue.min.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="../../assets/layout/css/custom.min.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="../../assets/favicon.png"/>
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed page-md">
<!-- BEGIN HEADER -->
<div class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner">
        <!-- BEGIN LOGO -->
        <div class="page-logo bg-red bg-font-red">
            <div class="menu-toggler sidebar-toggler">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>

        <!-- END LOGO -->
        <!-- BEGIN PAGE ACTIONS -->
        <!-- DOC: Remove "hide" class to enable the page header actions -->
        <div class="page-actions">
            <a href="../home/main.html">
                <img src="../../assets/logo-small.png" alt="logo" class="logo-default" /> </a>
            <div class="btn-group" >
                <a class="btn btn-link disabled font-white" style="background-color: transparent;"> <small> Decentralized Protocol for Document Verification</small> </a>
                <!--<span class="hidden-sm hidden-xs">idStack <small> Decentralized Protocol for Document Verification </small></span>&nbsp;-->
            </div>
        </div>
        <!-- END PAGE ACTIONS -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top bg-purple-studio">
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu m-grid-col-md-6">
                <ul class="nav navbar-nav pull-right">
                    <!-- BEGIN NOTIFICATION DROPDOWN -->
                    <li class="dropdown dropdown-extended dropdown-notification" id="header_notification_bar">
                        <h3 class="font-white bold uppercase" onclick="window.location.assign('dashboard.html')" >Validator</h3>
                    </li>
                    <!-- END NOTIFICATION DROPDOWN -->
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div id="sidebar"></div>
    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- BEGIN PAGE HEAD-->
            <div class="page-head">
                <!-- BEGIN PAGE TITLE -->
                <div class="page-title">
                    <h1>Validator Configuration
                        <small> Change configurations of auto validator to verify documents using the digital
                            signatures
                        </small>
                    </h1>

                </div>
                <!-- END PAGE TITLE -->
                <!-- BEGIN PAGE BASE CONTENT -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="portlet light  portlet-form">
                            <div class="portlet-title">
                                <div class="caption font-green-haze">
                                    <i class="icon-user font-green-haze"></i>
                                    <span class="caption-subject font-green bold uppercase">Basic Details</span>
                                </div>
                            </div>
                            <div class="portlet-body form">
                                <form class="form-horizontal" id="basic-form" enctype="multipart/form-data" role="form">
                                    <div class="form-body">
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Organization</label>
                                            <div class="col-md-6">
                                                <input type="email" class="form-control" id="organization" name="organization">
                                                <div class="form-control-focus"> </div>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Email</label>
                                            <div class="col-md-6">
                                                <input type="email" class="form-control" id="email" name="email" placeholder="abc@example.com">
                                                <div class="form-control-focus"> </div>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Web URL</label>
                                            <div class="col-md-6">
                                                <input type="text" class="form-control" id="web" name="web" placeholder="http://example.com/extractor">
                                                <div class="form-control-focus"> </div>
                                                <span class="help-block">Define the URL of your web service</span>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Port</label>
                                            <div class="col-md-6">
                                                <input type="number" class="form-control" id="port" name="port" placeholder="0000">
                                                <div class="form-control-focus"></div>
                                                <span class="help-block">Define the port number of your web service</span>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Designation</label>
                                            <div class="col-md-6">
                                                <input type="text" class="form-control" id="designation"
                                                       name="designation" placeholder="Employee">
                                                <div class="form-control-focus"></div>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input">
                                            <label class="col-md-3 control-label">Name</label>
                                            <div class="col-md-6">
                                                <input type="text" class="form-control" id="name" name="name" placeholder="John Smith">
                                                <div class="form-control-focus"></div>
                                            </div>
                                        </div>
                                        <div class="form-actions right">
                                            <button type="reset" class="btn default">Reset</button>
                                            <button type="button" class="btn green" onclick="setBasicDetails();">Save
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <!-- BEGIN SIGN FORM PORTLET-->
                        <div class="portlet light  portlet-form">
                            <div class="portlet-title">
                                <div class="caption">
                                    <i class="icon-briefcase font-green-haze"></i>
                                    <span class="caption-subject font-green bold uppercase">Digital Signature Certificates</span>
                                </div>
                            </div>
                            <div class="portlet-body form">
                                <form class="form-horizontal" id="certificate-form" enctype="multipart/form-data" role="form">
                                    <div class="form-body">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 font-grey-cascade">Public Certificate File <span
                                                    data-toggle="tooltip"
                                                    title="Upload your public certificate to the server">
                                                        <i class="icon-question"></i> </span></label>
                                            <div class="col-md-3">
                                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                                    <div class="input-group input-large">
                                                        <div class="form-control uneditable-input input-fixed input-medium"
                                                             data-trigger="fileinput">
                                                            <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                            <span class="fileinput-filename"> </span>
                                                        </div>
                                                        <span class="input-group-addon btn default btn-file">
                                                                <span class="fileinput-new"> Select file </span>
                                                                <span class="fileinput-exists"> Change </span>
                                                                <input type="file" id="CertFileInput" name="pubCert"> </span>
                                                        <a href="javascript:;"
                                                           class="input-group-addon btn red fileinput-exists"
                                                           data-dismiss="fileinput"> Remove </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 font-grey-cascade">Private Key File <span
                                                    data-toggle="tooltip"
                                                    title="Upload your private certificate to the server">
                                                        <i class="icon-question"></i> </span></label>
                                            <div class="col-md-4">
                                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                                    <div class="input-group input-large">
                                                        <div class="form-control uneditable-input input-fixed input-medium"
                                                             data-trigger="fileinput">
                                                            <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                            <span class="fileinput-filename"> </span>
                                                        </div>
                                                        <span class="input-group-addon btn default btn-file">
                                                                <span class="fileinput-new"> Select file </span>
                                                                <span class="fileinput-exists"> Change </span>
                                                                <input type="file" id="PvtFileInput" name="pvtCert"> </span>
                                                        <a href="javascript:;"
                                                           class="input-group-addon btn red fileinput-exists"
                                                           data-dismiss="fileinput"> Remove </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <input type="password" name="password" class="form-control" id="certificate_pass"
                                                       placeholder="Password of private key">
                                                <div class="form-control-focus"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-actions right">
                                        <button type="reset" class="btn default">Reset</button>
                                        <button type="submit" class="btn green" >Save
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- END Verify FORM PORTLET-->
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <!-- BEGIN SAMPLE FORM PORTLET-->
                        <div class="portlet light ">
                            <div class="portlet-title">
                                <div class="caption font-green-haze">
                                    <i class="icon-docs font-green-haze"></i>
                                    <span class="caption-subject font-green bold uppercase"> Document type Configuration <span
                                            data-toggle="tooltip"
                                            title="Define automatic signing settings to each document type">
                                                        <i class="icon-question"></i> </span> </span>
                                </div>
                            </div>
                            <div class="portlet-body form">
                                <form role="form" class="form-horizontal">
                                    <div class="form-body">

                                        <div class="table-scrollable table-scrollable-borderless">
                                            <table class="table table-hover table-light" id="access_list">
                                                <thead>
                                                <tr class="uppercase">
                                                    <th> Document type</th>
                                                    <th> Automatic validation <span data-toggle="tooltip"
                                                                                    title="Enables automatic validation for the selected document type"><i
                                                            class="icon-question"></i> </span></th>
                                                    <th> Issuer is equal to Extractor <span data-toggle="tooltip"
                                                                                            title="Enables automatic validation if extractor is the issuer">
                                                        <i class="icon-question"></i> </span></th>
                                                    <th> Sign Content <span data-toggle="tooltip"
                                                                            title="Enables automatic validation of content">
                                                        <i class="icon-question"></i> </span></th>
                                                </tr>
                                                </thead>
                                                <script id="access_template" type="text/html">
                                                    <tr>
                                                        <td> ${stringBeautify(doc_type)}</td>
                                                        <td>
                                                            <div class="md-checkbox">
                                                                <input type="checkbox"
                                                                       id=${doc_type+"-automatic_processable"}
                                                                       class="md-check" {{if automatic_processable}}
                                                                       checked {{/if}} >
                                                                <label for=${doc_type+"-automatic_processable"}>
                                                                    <span></span>
                                                                    <span class="check"></span>
                                                                    <span class="box"></span></label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="md-checkbox has-error">
                                                                <input type="checkbox"
                                                                       id=${doc_type+"-issuer_equal_extractor"}
                                                                       class="md-check" {{if issuer_equal_extractor}}
                                                                       checked {{/if}}>
                                                                <label for=${doc_type+"-issuer_equal_extractor"}>
                                                                    <span></span>
                                                                    <span class="check"></span>
                                                                    <span class="box"></span></label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="md-checkbox has-info">
                                                                <input type="checkbox"
                                                                       id=${doc_type+"-content_signable"}
                                                                       class="md-check" {{if content_signable}} checked
                                                                       {{/if}}>
                                                                <label for=${doc_type+"-content_signable"}>
                                                                    <span></span>
                                                                    <span class="check"></span>
                                                                    <span class="box"></span></label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </script>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="form-actions right">
                                        <button type="reset" class="btn default">Reset</button>
                                        <button type="button" class="btn green" onclick="setDocumentConfig()">Save
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- END SAMPLE FORM PORTLET-->
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="portlet light ">
                            <div class="portlet-title">
                                <div class="caption">
                                    <i class="icon-check font-green"></i>
                                    <span class="caption-subject font-green bold uppercase">Blacklist/ Whitelist configuration</span>
                                </div>
                            </div>
                            <div class="portlet-body form">
                                    <div class="form-body">
                                        <div class="form-group col-md-6">
                                            <div style="border: solid;border-color: #E94F61;padding: 5px;">
                                                <form action="#" id="blacklist_UI" class="mt-repeate form-horizontal">
                                                    <div class="col-md-4 raw">
                                                        <a href="javascript:;" data-repeater-create
                                                           class="btn red mt-repeater-add">
                                                            <i class="fa fa-plus"></i> Add blacklist member </a>
                                                        <p style="color:transparent;">.</p>
                                                    </div>

                                                    <table class="table table-striped table-advance table-hover"
                                                           data-repeater-list="black_list">
                                                        <tbody>
                                                        <tr data-repeater-item class="mt-repeater-item">
                                                            <td class="hidden-xs mt-repeater-input" style="padding: 0px">
                                                                <div class="portlet box red" style="margin-bottom: 0px">
                                                                    <div class="portlet-title ">
                                                                        <div class="caption font-green-haze col-md-10">
                                                                            <!--<i class="icon-user font-green-haze"></i>-->
                                                                            <div class="input-group">
                                                                                <span class="input-group-addon"><i class="icon icon-user"></i> </span>
                                                                                <input type="text" class="form-control" name="item" value="">
                                                                            </div>
                                                                        </div>
                                                                        <div class="tools">
                                                                            <a href="javascript:;" class="expand"> </a>
                                                                            <a href="javascript:;" data-repeater-delete class="remove"> </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body portlet-collapsed">
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Country</span>
                                                                            <input type="text" class="form-control" name="country" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Organization Unit</span>
                                                                            <input type="text" class="form-control" name="organizationUnit" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Email</span>
                                                                            <input type="text" class="form-control" name="ownerEmail" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Name</span>
                                                                            <input type="text" class="form-control" name="ownerName" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Organization</span>
                                                                            <input type="text" class="form-control" name="ownerOrganization" >
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <!--<td class="mt-repeater-input">-->
                                                            <!--<a href="javascript:;"-->
                                                            <!--class="btn btn-circle btn-sm green mt-repeater-delete">-->
                                                            <!--<i class="fa fa-info-circle" data-toggle="modal" data-target="#myModal"></i> </a>-->
                                                            <!--<a href="javascript:;" data-repeater-delete-->
                                                            <!--class="btn btn-circle btn-sm red mt-repeater-delete">-->
                                                            <!--<i class="fa fa-trash-o"></i> </a>-->
                                                            <!--</td>-->
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div  style="border: solid;border-color: #4AB4A5;padding: 5px">
                                                <form action="#" id="whitelist_UI" class="mt-repeate form-horizontal">
                                                    <div class="col-md-4 raw">
                                                        <a href="javascript:;" data-repeater-create
                                                           class="btn green-dark mt-repeater-add">
                                                            <i class="fa fa-plus"></i> Add whitelist member </a>
                                                        <p style="color:transparent;">.</p>
                                                    </div>

                                                    <table class="table table-striped table-advance table-hover"
                                                           data-repeater-list="white_list">
                                                        <tbody>
                                                        <tr data-repeater-item class="mt-repeater-item">
                                                            <td class="hidden-xs mt-repeater-input" style="padding: 0px">
                                                                <div class="portlet box green-dark" style="margin-bottom: 0px">
                                                                    <div class="portlet-title ">
                                                                        <div class="caption font-green-haze col-md-10">
                                                                            <!--<i class="icon-user font-green-haze"></i>-->
                                                                            <div class="input-group">
                                                                                <span class="input-group-addon"><i class="icon icon-user"></i> </span>
                                                                                <input type="text" class="form-control" name="item" value="">
                                                                            </div>
                                                                        </div>
                                                                        <div class="tools">
                                                                            <a href="javascript:;" class="expand"> </a>
                                                                            <a href="javascript:;" data-repeater-delete class="remove"> </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body portlet-collapsed">
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Country</span>
                                                                            <input type="text" class="form-control" name="country" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Organization Unit</span>
                                                                            <input type="text" class="form-control" name="organizationUnit" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Email</span>
                                                                            <input type="text" class="form-control" name="ownerEmail" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Name</span>
                                                                            <input type="text" class="form-control" name="ownerName" >
                                                                        </div>
                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" >Organization</span>
                                                                            <input type="text" class="form-control" name="ownerOrganization" >
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <!--<td class="mt-repeater-input">-->
                                                                <!--<a href="javascript:;"-->
                                                                   <!--class="btn btn-circle btn-sm green mt-repeater-delete">-->
                                                                    <!--<i class="fa fa-info-circle" data-toggle="modal" data-target="#myModal"></i> </a>-->
                                                                <!--<a href="javascript:;" data-repeater-delete-->
                                                                   <!--class="btn btn-circle btn-sm red mt-repeater-delete">-->
                                                                    <!--<i class="fa fa-trash-o"></i> </a>-->
                                                            <!--</td>-->
                                                        </tr>
                                                        </tbody>
                                                    </table>


                                                    <!--<table class="table table-striped table-advance table-hover"-->
                                                           <!--data-repeater-list="white_list">-->
                                                        <!--<tbody>-->
                                                        <!--<tr data-repeater-item class="mt-repeater-item">-->
                                                            <!--<td class="hidden-xs mt-repeater-input">-->
                                                                <!--<input type="text" name="item" class="form-control"-->
                                                                       <!--value=""/>-->
                                                            <!--</td>-->
                                                            <!--<td class="mt-repeater-input">-->
                                                                <!--<a href="javascript:;"-->
                                                                   <!--class="btn btn-circle btn-sm green mt-repeater-delete">-->
                                                                    <!--<i class="fa fa-info-circle" data-toggle="modal" data-target="#myModal"></i> </a>-->
                                                                <!--<a href="javascript:;" data-repeater-delete-->
                                                                   <!--class="btn btn-circle btn-sm red mt-repeater-delete">-->
                                                                    <!--<i class="fa fa-trash-o"></i> </a>-->
                                                            <!--</td>-->
                                                        <!--</tr>-->
                                                        <!--</tbody>-->
                                                    <!--</table>-->
                                                </form>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-actions right">
                                        <button type="reset" class="btn default">Reset</button>
                                        <button type="button" class="btn green" onclick="saveBlackWhiteList()">Save
                                        </button>
                                    </div>

                                <!-- END FORM-->
                            </div>
                        </div>
                        <!-- END PORTLET-->
                    </div>
                    <div class="row">
                        <div class="col-md-offset-0 col-md-1">
                            <a href="dashboard.html" class="btn default button-previous">
                                <i class="fa fa-angle-left"></i> Back </a>

                        </div>
                    </div>
                </div>
                <!-- END PAGE BASE CONTENT -->
            </div>
            <!-- END PAGE HEAD-->
        </div>
        <!-- END CONTENT BODY -->
    </div>
    <!-- END CONTENT -->
</div>
<!-- END CONTAINER -->

<!-- Start wrapper for jquery script imports  -->
<script>if (typeof module === 'object') {
    window.module = module;
    module = undefined;
}</script>

<script type="text/javascript" src="../../assets/global/plugins/jquery.min.js"></script>

<!-- End wrapper for jquery script imports -->
<script>if (window.module) module = window.module;</script>

<script>
    var json_doc;
    var varProperties;
    var blackList = [];
    var whiteList = [];
    var blackListUl;
    var whiteListUl;
    $(function () {
        $("#sidebar").load("../../layout/sidebar.html");
        $.getJSON("../../properties.json", function (json) {
            varProperties = json;
            //block blacklist, whitelist
            $(".ms-list").css("height", "300px");
            blackListUl = $(".ms-selection .ms-list");
            whiteListUl = $(".ms-selectable .ms-list");
            getBasicDetails();
            getDocumentConfig();
            blackListUl = $("#blacklist_UI").repeater({
                show: function () {
                    $(this).slideDown();
                },
                ready: function (setIndexes) {
                }
            });
            whiteListUl = $("#whitelist_UI").repeater({
                show: function () {
                    $(this).slideDown();
                },

                ready: function (setIndexes) {
                }
            });
            getBlackList();
            getWhiteList();

        });
    });

    function saveBlackWhiteList() {
        whiteList =[];
        blackList = [];
        try{
            $('#whitelist_UI').repeaterVal().white_list.forEach(function (listItem) {
                whiteList.push(listItem.item);
            });
        }catch(err) {
            //
        }
        try {
            $('#blacklist_UI').repeaterVal().black_list.forEach(function (listItem) {
                blackList.push(listItem.item);
            });
        }catch(err) {
            //
        }
        setWhiteList();
        setBlackList();
    }

    function getWhiteList() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/getconfig/whitelist/",
            "method": "GET",
            "headers": {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            }
        };
        $.ajax(settings).done(function (response) {
            console.log(response);
            response.white_list.forEach(function (item) {
                whiteList.push(
                    {"item": item.url,"country":item.cert_details["C"],"organizationUnit":item.cert_details["OU"],"ownerEmail":item.cert_details["EMAILADDRESS"],"ownerName":item.cert_details["CN"],"ownerOrganization":item.cert_details["O"]}
                );
            });
            whiteListUl.setList(whiteList);

        }).fail(function (jqXHR, errorStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }

    function getBlackList() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/getconfig/blacklist/",
            "method": "GET",
            "headers": {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            }
        }
        $.ajax(settings).done(function (response) {
            console.log(response);
            response.black_list.forEach(function (item) {
                blackList.push(
                    {"item": item.url,"country":item.cert_details["C"],"organizationUnit":item.cert_details["OU"],"ownerEmail":item.cert_details["EMAILADDRESS"],"ownerName":item.cert_details["CN"],"ownerOrganization":item.cert_details["O"]}
                );
            });
            blackListUl.setList(blackList);

        }).fail(function (jqXHR, errorStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }

    function setWhiteList() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/saveconfig/whitelist/",
            "method": "POST",
            "headers": {
                "content-type": "application/json",
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            "processData": false,
            "data": JSON.stringify({
                    "white_list": whiteList
                }
            )
        }

        $.ajax(settings).done(function (response) {
            console.log(response);
            toastr.success("Whitelist saved successfully!");
        }).fail(function (jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }

    function setBlackList() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/saveconfig/blacklist/",
            "method": "POST",
            "headers": {
                "content-type": "application/json",
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            "processData": false,
            "data": JSON.stringify({
                    "black_list": blackList
                }
            )
        }

        $.ajax(settings).done(function (response) {
            console.log(response);
            toastr.success("Blacklist saved successfully!");
        }).fail(function (jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }


    //Web service calls
    function getBasicDetails() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/getconfig/basic/",
            "method": "GET",
            "headers": {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            }
        }
        $.ajax(settings).done(function (response) {
            console.log(response);
            if (response == null) {
                toastr.error("Please save your configurations to continue.");
            }
            $('#organization').val(response.organization);
            $('#email').val(response.email);
            $('#web').val(response.web);
            $('#port').val(response.port);
            $('#designation').val(response.designation);
            $('#name').val(response.name);

        }).fail(function (jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }


    function setBasicDetails() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/saveconfig/basic/",
            "method": "POST",
            "headers": {
                "content-type": "application/json",
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            "processData": false,
            "data": JSON.stringify({
                "organization": document.getElementById('organization').value,
                "email": document.getElementById('email').value,
                "web": document.getElementById('web').value,
                "port": document.getElementById('port').value,
                "designation": document.getElementById('designation').value,
                "name": document.getElementById('name').value
            })
        }

        $.ajax(settings).done(function (response) {
            console.log(response);
            toastr.success("Basic details added successfully!");
        }).fail(function(jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        })
    }

    function getDocumentConfig() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/getconfig/document/",
            "method": "GET",
            "headers": {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            }
        }
        $.ajax(settings).done(function (response) {
            console.log(response);

            $("#access_template").tmpl(response.document).appendTo("#access_list");
        }).fail(function (jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }


    function setDocumentConfig() {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/saveconfig/document/",
            "method": "POST",
            "headers": {
                "content-type": "application/json",
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            "processData": false,
            "data": JSON.stringify(
                {
                    "document": [
                        {
                            "doc_type": "transcript",
                            "automatic_processable": document.getElementById("transcript" + "-" + "automatic_processable").checked,
                            "issuer_equal_extractor": document.getElementById("transcript" + "-" + "issuer_equal_extractor").checked,
                            "content_signable": document.getElementById("transcript" + "-" + "content_signable").checked

                        },
                        {
                            "doc_type": "passport",
                            "automatic_processable": document.getElementById("passport" + "-" + "automatic_processable").checked,
                            "issuer_equal_extractor": document.getElementById("passport" + "-" + "issuer_equal_extractor").checked,
                            "content_signable": document.getElementById("passport" + "-" + "content_signable").checked
                        },
                        {
                            "doc_type": "university_id",
                            "automatic_processable": document.getElementById("university_id" + "-" + "automatic_processable").checked,
                            "issuer_equal_extractor": document.getElementById("university_id" + "-" + "issuer_equal_extractor").checked,
                            "content_signable": document.getElementById("university_id" + "-" + "content_signable").checked
                        }
                    ]
                }
            )
        }

        $.ajax(settings).done(function (response) {
            console.log(response);
            toastr.success("Document configuration details added successfully!");
        }).fail(function (jqXHR, textStatus, errorThrown) {
            if (jqXHR.status && jqXHR.status == 400) {
                toastr.error(jqXHR.responseText);
            } else {
                toastr.error("Something went wrong");
            }
        });
    }

    $("form#certificate-form").submit(function () {

        var formData = new FormData($("#certificate-form")[0]);
        formData.set("cert", formData.get("pubCert"));
        $.ajax({
            url: "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/savepubcert",
            data: formData,
            headers: {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            async: true,
            crossDomain: true,
            type: 'POST',
            contentType: false, // NEEDED, DON'T OMIT THIS (requires jQuery 1.6+)
            processData: false, // NEEDED, DON'T OMIT THIS
            success: function (data, status) {
                console.log("success");
                toastr.success("Public certificate stored successfully!");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                if (jqXHR.status && jqXHR.status == 400) {
                    toastr.error(jqXHR.responseText);
                } else {
                    toastr.error("Something went wrong");
                }
            }
        });

        formData.set("cert", formData.get("pvtCert"));

        $.ajax({
            url: "http://" + varProperties.validator.host + "/api-validator/" + varProperties.validator.apiVersion + "/" + varProperties.validator.apiKey + "/savepvtcert",
            data: formData,
            headers: {
                "Authorization": "Basic " + btoa(varProperties.validator.userName + ":" + varProperties.validator.password)
            },
            async: true,
            crossDomain: true,
            type: 'POST',
            contentType: false, // NEEDED, DON'T OMIT THIS (requires jQuery 1.6+)
            processData: false, // NEEDED, DON'T OMIT THIS
            success: function (data, status) {
                console.log(status);
                toastr.success("Private certificate stored successfully!");
            },

            error: function (jqXHR, textStatus, errorThrown) {
                if (jqXHR.status && jqXHR.status == 400) {
                    toastr.error(jqXHR.responseText);
                } else {
                    toastr.error("Something went wrong");
                }
            }
        });

        return false;
    });

</script>


<!-- BEGIN CORE PLUGINS -->

<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="../../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
<script src="https://cdn.rawgit.com/kevindb/jquery-load-json/v1.3.3/dist/jquery.loadJSON.min.js"
        integrity="sha384-fG4z44FEBJnIevyzvSDobSmVTsO/oVsxNvKcUl7bO1ihWYDPg2QI83Xi+7wSBzap"
        crossorigin="anonymous"></script>
<script src="../../assets/global/plugins/bootstrap-table/bootstrap-table.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../../assets/global/plugins/filesaverjs/filesaver.min.js"></script>
<script src="../../assets/global/plugins/jquery-repeater/jquery.repeater.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery-tmpl/jquery.tmpl.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-toastr/toastr.min.js" type="text/javascript"></script>

<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="../../assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->

<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="../../assets/pages/scripts/table-bootstrap.js" type="text/javascript"></script>
<!--<script src="../../assets/pages/scripts/form-repeater.min.js" type="text/javascript"></script>-->
<script src="../../assets/pages/scripts/components-multi-select.min.js" type="text/javascript"></script>
<script src="../../assets/custom/scripts/string-beautify.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->

<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="../../assets/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../../assets/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="../../assets/layout/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="../../assets/layout/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

</body>

</html>